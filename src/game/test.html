<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>test</title>
	<style>
		*{margin: 0;padding: 0}
		canvas{background: #000}
	</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script type="text/javascript">
var canvas = document.getElementById('canvas'),
		ctx = canvas.getContext('2d'),
		w = canvas.width = window.innerWidth,
		h = canvas.height = window.innerHeight
// 星空
function star() {

	hue = 217,
	stars = [],
	count = 0,
  	maxStars = 1300;//星星数量
	
  	var canvas2 = document.createElement('canvas'),
  	ctx2 = canvas2.getContext('2d');
  	canvas2.width = 100;
  	canvas2.height = 100;
  	var half = canvas2.width / 2,
  	gradient2 = ctx2.createRadialGradient(half, half, 0, half, half, half);
  	gradient2.addColorStop(0.025, '#CCC');
  	gradient2.addColorStop(0.1, 'hsl(' + hue + ', 61%, 33%)');
  	gradient2.addColorStop(0.25, 'hsl(' + hue + ', 64%, 6%)');
  	gradient2.addColorStop(1, 'transparent');
	
  	ctx2.fillStyle = gradient2;
  	ctx2.beginPath();
  	ctx2.arc(half, half, half, 0, Math.PI * 2);
  	ctx2.fill();

	// End cache

	function random(min, max) {
		if (arguments.length < 2) {
			max = min;
			min = 0;
		}
	
		if (min > max) {
			var hold = max;
			max = min;
			min = hold;
		}
	
		return Math.floor(Math.random() * (max - min + 1)) + min;
	}

	function maxOrbit(x, y) {
		var max = Math.max(x, y),
		diameter = Math.round(Math.sqrt(max * max + max * max));
		return diameter / 2;
	  //星星移动范围，值越大范围越小，
	}

	var Star = function() {
	
		this.orbitRadius = random(maxOrbit(w, h));
		this.radius = random(60, this.orbitRadius) / 8; 
	  	//星星大小
	  	this.orbitX = w / 2;
	  	this.orbitY = h / 2;
	  	this.timePassed = random(0, maxStars);
	  	this.speed = random(this.orbitRadius) / 50000; 
	  	//星星移动速度
	  	this.alpha = random(2, 10) / 10;
		
	  	count++;
	  	stars[count] = this;
	}
	
	Star.prototype.draw = function() {
		var x = Math.sin(this.timePassed) * this.orbitRadius + this.orbitX,
		y = Math.cos(this.timePassed) * this.orbitRadius + this.orbitY,
		twinkle = random(10);
	
		if (twinkle === 1 && this.alpha > 0) {
			this.alpha -= 0.05;
		} else if (twinkle === 2 && this.alpha < 1) {
			this.alpha += 0.05;
		}
	
		ctx.globalAlpha = this.alpha;
		ctx.drawImage(canvas2, x - this.radius / 2, y - this.radius / 2, this.	radius, this.radius);
		this.timePassed += this.speed;
	}

	for (var i = 0; i < maxStars; i++) {
		new Star();
	}
	
	function animation() {
		ctx.globalCompositeOperation = 'source-over';
	  	ctx.globalAlpha = 0.5; //尾巴
	  	ctx.fillStyle = 'hsla(' + hue + ', 64%, 6%, 2)';
	  	ctx.fillRect(0, 0, w, h)
		
	  	ctx.globalCompositeOperation = 'lighter';
	  	for (var i = 1, l = stars.length; i < l; i++) {
	  		stars[i].draw();
	  	};
	
	  	window.requestAnimationFrame(animation);
	}

	animation();
}

// 小球
function ball() {


	var arr = []

	function setBall(x, y, c) {
		ctx.fillStyle = c || '#fff'
		ctx.beginPath()
		ctx.arc(x, y, 10, 0, 2 * Math.PI)
		ctx.fill()
	}
	

	for (var i = 0; i < 10; i++) {
		var xy = {
			x: Math.round(Math.random() * w),
			y: Math.round(Math.random() * h),
			fx: Math.random() > 0.5 ? 1 : 0,
			fy: Math.random() > 0.5 ? 1 : 0
		}
		if (xy.x <= 10) xy.x = 10
		if (xy.x >= (w - 10)) xy.x = w - 10
		if (xy.y <= 10) xy.y = 10
		if (xy.y >= (h - 10)) xy.y = h - 10
		arr.push(xy)
	}

	setInterval(function() {
		ctx.fillStyle = '#000'
		ctx.fillRect(0, 0, w, h)
		for (var i = 0; i < arr.length; i++) {
			setBall(arr[i].x, arr[i].y)
			if (arr[i].fx) {
				arr[i].x++
				if (arr[i].x >= w - 10) arr[i].fx = 0
			} else {
				arr[i].x--
				if (arr[i].x <= 10) arr[i].fx = 1
			}
			if (arr[i].fy) {
				arr[i].y++
				if (arr[i].y >= h - 10) arr[i].fy = 0
			} else {
				arr[i].y--
				if (arr[i].y <= 10) arr[i].fy = 1
			}
		}
	}, 1000/60)

}

// 代码
function code(){

 	var number = 13, // 字体
 		space = 3, // x间隔
 		fps = 15,
		size = Math.round(w / number), //列数
		text = ['乾','坤','巽','震','坎','离','艮','兑','卐','金', '木','水','火','土'],
		list = []
	for (var i = 0; i < size; i++) {
		list.push({
			x: i * (number + space),
			y: -Math.round(Math.random() * 500)
		})
	}
	setInterval(function() {
		ctx.fillStyle = '#0d7f10'
		ctx.font = 'bold 15px Microsoft YaHei'
		ctx.shadowBlur = '15'
		ctx.shadowColor = '#0d7f10'
		for (var i = 0; i < list.length; i++) {
			ctx.fillText(text[Math.round(Math.random() * 13)], list[i].x, list[i].y)
			list[i].y += number + 3
			if (list[i].y > (Math.random() * 1000 + h)) list[i].y = 0
		}
		ctx.shadowBlur = 0
		ctx.fillStyle = 'rgba(0,0,0,.06)'
		ctx.fillRect(0, 0, w, h)
	}, 1000 / fps)
}


function xing() {
	var number = 100,
		list = [],
		half = 50,
		x = w / 2,
  		y = h / 2
	var setStar = (function() {
		var can = document.createElement('canvas')
		can.width = 70
  		can.height = 70
		var ctx = can.getContext('2d'),
  		half = 50,
  		star = ctx.createRadialGradient(half, half, 0, half, half, half)

  		star.addColorStop(0.025, '#CCC')
  		star.addColorStop(0.1, 'hsl(' + 217 + ', 61%, 33%)')
  		star.addColorStop(0.25, 'hsl(' + 217 + ', 64%, 6%)')
  		star.addColorStop(1, 'transparent')

  		ctx.fillStyle = star
  		ctx.beginPath()
  		ctx.arc(50, 50, 20, 0, Math.PI * 2)
  		ctx.fill()
  		return can
	}())
  	
	ctx.drawImage(setStar, x-50, y-50)
	ctx.fillStyle = '#fff'
	ctx.fillRect(x, y, 2, 2)


	function getAngle(d, r) {
		var h = 2 * Math.PI / 360 * d
		return {
			x: 0 + Math.sin(h) * r,
			y: 0 - Math.cos(h) * r
		}
	}
	

	var list = []
	for (var i = 0; i < 60; i++) {
		var _r = i * 3 // 圆心距
		var angle = i * 20 // 角度
		var xy = getAngle(angle, _r)
		xy.angle = angle
		xy._r = _r
		xy.r = i
		list.push(xy)
	}
	function move() {
		for (var i = 0; i < list.length; i++) {
			ctx.drawImage(setStar, list[i].x + x - 50, list[i].y + y - 50, list[i].r, list[i].r)
			list[i].angle++
			var an = getAngle(list[i].angle, list[i]._r)
			an.angle = list[i].angle
			an._r = list[i]._r
			list[i] = an
		}
	}
	setInterval(move, 1000/60)
}

function text() {
	ctx.font = '15px AHeitiStdR'
	ctx.textAlign = 'center'
	ctx.fillText('TEXT', w/2, 100) 

	var y = 1
	var texts = ['大概就','是说许','多年','后地球,','文明发','展到巅峰']
	function setText() {
		ctx.fillStyle = '#000'
		ctx.fillRect(0, 0, w, h)
		ctx.fillStyle = '#fff'
		for (var i = 0; i < texts.length; i++) {
			ctx.fillText(texts[i], w/2, y + (i * 20))
		}
		y++
		setTimeout(setText, 60)
	}
	setText()
}


function audio() {
	var au = document.createElement('audio')
	au.src = './music/1.mp3'
	au.onloadedmetadata = function() {
		this.play()
		console.log(this)
	}
}


// 圆

function curve() {
	var rn = 0
	ctx.translate(w / 2, h / 2)
	var x = 0,
		y = 0,
		r = w / 2 - 50,
		mr = r / 2
		sr = 20
	function loop() {
		ctx.rotate(Math.PI/180*rn)
		ctx.fillStyle = '#000'
		ctx.fillRect(-w, -h, w, h)
		// x
		ctx.strokeStyle = '#226'
		ctx.lineWidth = 0.5
		ctx.beginPath()
		ctx.moveTo(-w, y)
		ctx.lineTo(w, y)
		ctx.stroke()
		// y
		ctx.beginPath()
		ctx.moveTo(x, -h)
		ctx.lineTo(x, h)
		ctx.stroke()
		// 外圆
		ctx.strokeStyle = '#666'
		ctx.beginPath()
		ctx.arc(x, y, r, 0, Math.PI * 2)
		ctx.stroke()
		// 白色填充
		ctx.beginPath()
		ctx.arc(x, y, r, -Math.PI/2, Math.PI/2)
		ctx.stroke()
		ctx.fillStyle = '#666'
		ctx.stroke()
		ctx.fill()
		//
		ctx.beginPath()
		ctx.arc(x, y - mr, mr, 0, Math.PI * 2)
		ctx.fillStyle = '#666'
		ctx.stroke()
		ctx.fill()
		// sr top
		ctx.beginPath()
		ctx.arc(x, y - mr, 20, 0, Math.PI * 2)
		ctx.fillStyle = '#000'
		ctx.stroke()
		ctx.fill()
		//
		ctx.beginPath()
		ctx.arc(x, y + mr, mr, 0, Math.PI * 2)
		ctx.fillStyle = '#000'
		ctx.stroke()
		ctx.fill()
		// sr bottom
		ctx.beginPath()
		ctx.fillStyle = '#666'
		ctx.arc(x, y + mr, 20, 0, Math.PI * 2)
		ctx.stroke()
		ctx.fill()
		// ctx.beginPath()
		// ctx.moveTo(0, y)
		// ctx.quadraticCurveTo(50, 100, x, 100)
		// ctx.quadraticCurveTo(x/2+x, y/2, x, y)
		// ctx.lineJoin="round";
		// ctx.lineWidth = .5
		// //ctx.fill()
		// ctx.stroke()
		// // ctx.quadraticCurveTo()
		// setTimeout(function() {
		// 	loop()
		// 	rn++
		// 	console.log(rn)
		// }, 500)
	}
	loop()
}




</script>
</body>
</html>